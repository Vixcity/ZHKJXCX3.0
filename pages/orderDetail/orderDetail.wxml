<!--pages/order/orderDetail/orderDetail.wxml-->
<view id="orderDetail">
	<nav-content showHome="{{false}}">
		<view slot="after">
			订单详情
		</view>
	</nav-content>

	<view class="card">
		<view class="title">
			{{orderDetail.code}}
		</view>
		<view class="flexTitle">
			<view class="w30">下单公司</view>
			<view class="w70" style="color: #333333;">{{orderDetail.client_name}}-{{orderDetail.contacts_name || '无'}}</view>
		</view>
		<view class="flexTitle">
			<view class="w30">创建人</view>
			<view class="w70" style="color: #333333;">{{orderDetail.user_name}}</view>
		</view>
		<view class="flexTitle">
			<view class="w30">创建时间</view>
			<view class="w70" style="color: #333333;">{{orderDetail.created_at}}</view>
		</view>
		<view class="flexTitle">
			<view class="w30">订单状态</view>
			<view class="w70 colorOrange" wx:if="{{orderDetail.status === 1}}">已创建</view>
			<view class="w70 color27A2" wx:if="{{orderDetail.status === 2}}">进行中</view>
			<view class="w70 color03d0" wx:if="{{orderDetail.status === 3}}">已完成</view>
			<view class="w70 color03d0" wx:if="{{orderDetail.status === 4}}">已结算</view>
			<view class="w70 colorFA36" wx:if="{{orderDetail.status === 5}}">已逾期</view>
			<view class="w70 colorFA36" wx:if="{{orderDetail.status === 6}}">已取消</view>
		</view>
		<view class="flexTitle">
			<view class="w30">下单时间</view>
			<view class="w70" style="color: #333333;">{{orderDetail.time_data[0].order_time}}</view>
		</view>
		<view class="flexTitle">
			<view class="w30">下单数量</view>
			<view class="w70" style="color: #333333;">{{orderDetail.time_data[0].total_style}}
				款，{{orderDetail.time_data[0].total_number}} 件</view>
		</view>
		<view class="flexTitle">
			<view class="w30">币种汇率</view>
			<view class="w70" style="color: #333333;">{{orderDetail.settle_unit}}/{{orderDetail.settle_tax}}</view>
		</view>
		<view class="flexTitle">
			<view class="w30">下单金额</view>
			<view class="w70" style="color: #333333;">{{orderDetail.time_data[0].total_price}} 元</view>
		</view>
		<view class="flexTitle">
			<view class="w30">负责小组</view>
			<view class="w70" style="color: #333333;">{{orderDetail.group_name || '无'}}</view>
		</view>
		<view class="flexTitle">
			<view class="w30">特殊要求</view>
			<view class="w70 flex" style="color: #FA9036;">
				<view>{{orderDetail.time_data[0].is_send===1?'产前寄送样':''}}</view>
				<view>{{orderDetail.time_data[0].is_before_confirm===1?'产前确认':''}}</view>
				<view>{{orderDetail.time_data[0].is_urgent===1?'加急':''}}</view>
			</view>
		</view>
		<view>
			<view style="color: #666666;">备注信息</view>
			<rich-text class="mt10" style="color: #333333;" nodes="{{orderDetail.desc||'无'}}"></rich-text>
		</view>
		<van-image wx:if="{{orderDetail.time_data[0].is_check !== 4 && orderDetail.time_data[0].is_check !== 3}}"
			style="position: absolute;right:0;top:0%" width="130" height="94"
			src="{{statusImageList[orderDetail.time_data[0].is_check]}}" bindtap="openCheckDetail" />
		<view wx:else class="colorRed bold" style="position: absolute;right:5%;top:5%" bindtap="openCheckDetail">单据异常</view>
	</view>

	<view class="card">
		<view class="title">产品信息</view>
		<view wx:for="{{productList}}" wx:for-item="item" wx:key="item" wx:for-index="index">
			<view class="flex mb20">
				<view class="w30">
					<van-image width="100" height="100" fit="cover"
						src="{{item.image_data[0]||'https://file.zwyknit.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220211103236.png'}}" />
				</view>
				<view class="w70 flex fdc jcsb pl10">
					<view bindtap='showDetailPro' data-item="{{item}}">
						<view>{{item.name}}</view>
						<view class="color27A2">{{item.product_code}}</view>
					</view>
					<view class="flex jcsb aic">
						<view>{{item.category}}/{{item.secondary_category}}</view>
						<view class="flex w30 jcsb">
							<view class="tc" wx:if="{{item.craft_list_id}}"
								style="border: 1px solid #03d0a2;color:#03d0a2;width:25px;height:25px;border-radius: 1000px;">工</view>
							<view class="tc" wx:if="{{!item.craft_list_id}}"
								style="border: 1px solid #9c9c9c;color:#9c9c9c;width:25px;height:25px;border-radius: 1000px;">工</view>
							<view class="tc" wx:if="{{item.rel_quote_info.quote_id}}" bindtap="toQuotePriceDetail"
								data-id="{{item.rel_quote_info.quote_id}}"
								style="border: 1px solid #03d0a2;color:#03d0a2;width:25px;height:25px;border-radius: 1000px;">报</view>
							<view class="tc" wx:if="{{!item.rel_quote_info.quote_id}}"
								style="border: 1px solid #9c9c9c;color:#9c9c9c;width:25px;height:25px;border-radius: 1000px;">报</view>
						</view>
					</view>
				</view>
			</view>
			<view class="flex jcsb mt5" wx:for="{{item.product_info}}" wx:for-item="itemPro" wx:key="itemPro"
				wx:for-index="indexPro">
				<view class="w50">{{itemPro.size_name}}/{{itemPro.color_name}}</view>
				<view>{{itemPro.price}}{{orderDetail.settle_unit}}</view>
				<view>{{itemPro.number}}</view>
			</view>
		</view>
	</view>

	<view class="card fz28">
		<view class="title">批次信息</view>
		<view wx:for="{{orderDetail.time_data[0].batch_data}}" wx:for-item="itemBatch" wx:key="itemBatch"
			wx:for-index="index">
			<view class="flex jcsb vw70">
				<view class="flex aic">
					<view class="bgColor27A2 colorWhite tc"
						style="border-radius: 500px;width:25px;height: 25px;line-height: 25px;">
						{{index+1}}</view>
					<view class="ml10">{{itemBatch.delivery_time}}<text
							class="ml10 {{itemBatch.isOut?'colorRed':'color03d0'}}">({{(itemBatch.isOut?'逾期':'还剩') + itemBatch.otherDay + '天'}})</text>
					</view>
				</view>
				<view class="colorRed" wx:if="{{itemBatch.isOut}}">已逾期</view>
			</view>
			<view class="flex jcsb vw70 mt10">
				<view>{{itemBatch.batch_title || '无批次名'}} | {{itemBatch.batch_type_name || '无'}}</view>
			</view>
			<view class="flex jcsb mt10 color91">
				<view class="w33">产品品类</view>
				<view class="w33">尺码颜色</view>
				<view class="w33">计划/实际发货</view>
			</view>
			<view wx:for="{{itemBatch.product_data}}" wx:for-item="itemPro" wx:key="itemPro" wx:for-index="indexPro">
				<view class="flex jcsb mt10" wx:for="{{itemPro.product_info}}" wx:for-item="itemChild" wx:key="itemChild"
					wx:for-index="indexChild">
					<view class="w33">
						<view>{{itemPro.product_code||itemPro.system_code||'无编号'}}</view>
						<view class="color91">({{itemPro.category}}/{{itemPro.secondary_category}})</view>
					</view>
					<view class="w33">{{itemChild.size_name}}/{{itemChild.color_name}}</view>
					<view class="w33">{{itemChild.number}}/{{itemChild.transport_number||0}}</view>
				</view>
			</view>
		</view>
	</view>

	<!-- 物料汇总 -->
	<view class="card" wx:if="{{check !== 'true'}}">
		<view class="title">物料汇总信息</view>
		<view class="mt10">入库进度</view>
		<view class="mt10 bgColorB9 colorWhite por" style="border-radius: 1000px;width:100%;overflow: hidden;">
			<view class="poa" style="left: 10px;">原料入库进度</view>
			<view class="poa" style="right: 10px;">{{materialProgress.material_push}}%</view>
			<view class="bgColor27A2"
				style="border-radius: 1000px;width: {{materialProgress.material_push>100?100:materialProgress.material_push}}%; height: 25px;">
			</view>
		</view>
		<view class="mt10">出库进度</view>
		<view class="mt10 bgColorB9 colorWhite por" style="border-radius: 1000px;width:100%;overflow: hidden;">
			<view class="poa" style="left: 10px;">原料出库进度</view>
			<view class="poa" style="right: 10px;">{{materialProgress.material_pop}}%</view>
			<view class="bgColor27A2"
				style="border-radius: 1000px;width: {{materialProgress.material_pop>100?100:materialProgress.material_pop}}%; height: 25px;">
			</view>
		</view>

		<view class="overfh" style="height:{{isShow?'auto':0}}px">
			<view wx:for="{{materialDetail}}" wx:for-item="item" wx:key="item" wx:for-index="index">
				<view class="mt10">{{item.plan_code}}</view>
				<view wx:for="{{item.data}}" wx:for-item="itemChild">
					<view class="flex jcsb mt10" style="background: rgba(0,0,0,0.1);">
						<view class="w50">{{itemChild.material_name}}</view>
						<view class="w20">{{itemChild.material_color}}</view>
						<view class="w30">{{itemChild.number}}{{itemChild.unit}}</view>
					</view>

					<!-- 调 -->
					<view class="flex jcsb mt10 mb20" wx:for="{{itemChild.material_transfer}}" wx:for-item="itemTransfer"
						wx:key="itemTransfer" wx:for-index="indexTransfer">
						<text class="bgColor27A2 colorWhite  tc"
							style="border-radius: 500px;width:25px;height: 25px;line-height: 25px;">调</text>
						<view class="flex aic w90 jcsb">
							<view>{{itemTransfer.store}}</view>
							<view>{{itemTransfer.material_color}}</view>
							<view>{{itemTransfer.number}}</view>
						</view>
					</view>

					<!-- 采 -->
					<view class="flex jcsb mt10 mb20" wx:for="{{itemChild.material_order}}" wx:for-item="itemMaterialOrder"
						wx:key="itemMaterialOrder" wx:for-index="indexMaterialOrder">
						<text class="bgColor27A2 colorWhite tc"
							style="border-radius: 500px;width:25px;height: 25px;line-height: 25px;">采</text>
						<view class="w90 flex jcsb aic">
							<view>{{itemMaterialOrder.client_name}}</view>
							<view>{{itemMaterialOrder.material_color}}</view>
							<view>{{itemMaterialOrder.number}}{{itemMaterialOrder.unit}}</view>
						</view>
					</view>

					<!-- 加 -->
					<view class="flex jcsb mt10 mb20" wx:for="{{itemChild.material_process}}" wx:for-item="itemMaterialProcess"
						wx:key="itemMaterialProcess" wx:for-index="indexMaterialProcess">
						<text class="bgColor27A2 colorWhite tc"
							style="border-radius: 500px;width:25px;height: 25px;line-height: 25px;">加</text>
						<view class="w90 flex jcsb aic">
							<view>{{itemMaterialProcess.client_name}}</view>
							<view>{{itemMaterialProcess.process}}</view>
							<view>{{itemMaterialProcess.number}}{{itemMaterialProcess.unit}}</view>
						</view>
					</view>

					<!-- 入 -->
					<view class="flex jcsb mt10 mb20" wx:for="{{itemChild.final_push}}" wx:for-item="itemMaterialPush"
						wx:key="itemMaterialPush" wx:for-index="indexMaterialPush">
						<text class="bgColor27A2 colorWhite tc"
							style="border-radius: 500px;width:25px;height: 25px;line-height: 25px;">入</text>
						<view class="w90 flex jcsb aic">
							<view>{{itemMaterialPush.store}}</view>
							<view>{{itemMaterialPush.number}}</view>
						</view>
					</view>

					<!-- 出 -->
					<view class="flex jcsb mt10 mb20" wx:for="{{itemChild.final_pop}}" wx:for-item="itemMaterialPop"
						wx:key="itemMaterialPop" wx:for-index="indexMaterialPop">
						<text class="bgColor27A2 colorWhite tc"
							style="border-radius: 500px;width:25px;height: 25px;line-height: 25px;">出</text>
						<view class="w90 flex jcsb aic">
							<view>{{itemMaterialPop.client_name}}</view>
							<view>{{itemMaterialPop.number}}{{itemMaterialPop.unit}}</view>
						</view>
					</view>

					<view class="flex jcsb mt10 mb20"
						wx:if="{{ itemChild.material_transfer.length === 0 && itemChild.material_order.length === 0 && itemChild.material_process.length === 0 && itemChild.final_push.length === 0 && itemChild.final_pop.length === 0}}">
						<view class="w90 tc color9E">暂无原料信息</view>
					</view>
				</view>
			</view>
		</view>
		<view class="color27A2 tc" bindtap='changeIsShow'>
			{{isShow?'点击收起':'点击展开'}}
			<van-icon name="arrow-down" wx:if="{{!isShow}}" />
			<van-icon name="arrow-up" wx:if="{{isShow}}" />
		</view>
	</view>

	<!-- 生产汇总 -->
	<view class="card" wx:if="{{check !== 'true'}}">
		<view class="title">生产汇总信息</view>
		<view class="mt10">生产织造进度</view>
		<view class="mt10 bgColorB9 colorWhite por" style="border-radius: 1000px;width:100%;overflow: hidden;">
			<view class="poa" style="left: 10px;">生产织造进度(外协申报数量)</view>
			<view class="poa" style="right: 10px;">{{productionProgress.weave}}%</view>
			<view class="bgColor27A2"
				style="border-radius: 1000px;width: {{productionProgress.weave>100?100:productionProgress.weave}}%; height: 25px;">
			</view>
		</view>
		<view class="mt10">检验入库进度</view>
		<view class="mt10 bgColorB9 colorWhite por" style="border-radius: 1000px;width:100%;overflow: hidden;">
			<view class="poa" style="left: 10px;">检验入库进度(车间申报数量)</view>
			<view class="poa" style="right: 10px;">{{productionProgress.inspection}}%</view>
			<view class="bgColor27A2"
				style="border-radius: 1000px;width: {{productionProgress.inspection>100?100:productionProgress.inspection}}%; height: 25px;">
			</view>
		</view>
		<view class="overfh" style="height:{{isShow2?'auto':0}}px">
			<!-- 开始很深很深的循环 -->
			<view wx:for="{{productionDetail}}" wx:for-item="item" wx:key="item" wx:for-index="index">
				<!-- 产品编号 -->
				<view wx:for="{{item.data}}" wx:for-item="itemColor" wx:key="itemColor" wx:for-index="indexColor">
					<!-- 颜色层级 -->
					<view wx:for="{{itemColor.data}}" wx:for-item="itemSize" wx:key="itemSize" wx:for-index="indexSize">
						<view class="flex jcsb" style="background: rgba(0,0,0,0.1);">
							<view class="w50">{{item.product_code}}</view>
							<view class="w30">{{itemColor.color_name}}/{{itemSize.size_name}}</view>
							<view class="w20">{{itemSize.data.order_number || 0}}件</view>
						</view>
						<view wx:for="{{itemSize.data.weave_info}}" wx:for-item="itemClient" wx:key="itemClient"
							wx:for-index="indexClient" class="mb10">
							<!-- 公司层级 -->
							<view wx:for="{{itemClient.data}}" wx:for-item="itemChild" wx:key="itemChild" wx:for-index="indexChild"
								class="flex jcsb flexWarp mt10">
								<!-- 工序层级 -->
								<view class="w50 flex">
									<view class="color91">生产单位</view>
									<view class="pr10 ml10">{{itemClient.client_name}}</view>
								</view>
								<view class="w50 flex">
									<view class="color91">生产工序</view>
									<view class="pr10 ml10 color27A2">{{itemChild.process_name}}</view>
								</view>
								<view class="w100 flex mt10">
									<view class="color91">计划数量</view>
									<view class="pr10 ml10">{{itemChild.data.plan_number}}</view>
								</view>
								<view class="w50 flex mt10">
									<view class="color91">完成数量</view>
									<view class="pr10 ml10">{{itemChild.data.real_number}}</view>
								</view>
								<view class="w50 flex mt10">
									<view class="color91">检验入库数量</view>
									<view class="pr10 ml10">{{itemChild.data.inspection_number}}</view>
								</view>
								<view class="w50 flex mt10">
									<view class="color91">半次/全次</view>
									<view class="pr10 ml10 colorE800">
										{{itemChild.data.part_shoddy_number||0}}/{{itemChild.data.shoddy_number||0}}
									</view>
								</view>
								<view class="w50 flex mt10">
									<view class="color91">次品率</view>
									<view class="pr10 ml10 colorE800">{{itemChild.data.shoddy_pre}}%</view>
								</view>
								<view class="line" wx:if="{{index !== itemClient.data.length-1}}"></view>
							</view>
						</view>
					</view>
				</view>
			</view>
		</view>
		<view class="color27A2 tc" bindtap='changeIsShow2'>
			{{isShow2?'点击收起':'点击展开'}}
			<van-icon name="arrow-down" wx:if="{{!isShow2}}" />
			<van-icon name="arrow-up" wx:if="{{isShow2}}" />
		</view>
	</view>

	<!-- 财务概览 -->
	<view class="card">
		<view class="title" style="margin-top: unset;">
			财务流程汇总仅管理员可见
		</view>
	</view>
	<view class="card" wx:if="{{has_check}}">
		<view class="flex">
			<view class="bold">财务概览</view>
			<view class="ml10 color6">点击具体费用表格查看详情</view>
		</view>
		<view class="tc">
			<view class="flex">
				<view class="w50 pt10 pb10" style="border: 1px solid rgba(0,0,0,0.1);" bindtap='showFinancialPopup'
					data-type='product'>
					<view>产品费用</view>
					<view class="mt10 color27A2">
						{{financialInfo.product_total_price}} 元
					</view>
				</view>
				<view class="w50 pt10 pb10" style="border: 1px solid rgba(0,0,0,0.1); border-left: none;"
					bindtap='showFinancialPopup' data-type='material'>
					<view>原料费用</view>
					<view class="mt10 color27A2">
						{{financialInfo.material.material.gather.plan_price}} 元
					</view>
				</view>
			</view>
			<view class="flex">
				<view class="w50 pt10 pb10" style="border: 1px solid rgba(0,0,0,0.1);border-top: none;"
					bindtap='showFinancialPopup' data-type='decorate'>
					<view>辅料费用</view>
					<view class="mt10 color27A2">
						{{financialInfo.material.decorate.gather.plan_price}} 元
					</view>
				</view>
				<view class="w50 pt10 pb10" style="border: 1px solid rgba(0,0,0,0.1); border-top: none;border-left: none;"
					bindtap='showFinancialPopup' data-type='pack'>
					<view>包装辅料</view>
					<view class="mt10 color27A2">
						{{financialInfo.pack.gather.total_price}} 元
					</view>
				</view>
			</view>
			<view class="flex flexWarp">
				<view class="pt10 pb10 specialBorder" wx:for="{{financialInfo.weave}}" wx:for-item="itemWeave"
					wx:key="itemWeave" wx:for-index="indexWeave" bindtap='showFinancialPopup' data-indexWeave="{{indexWeave}}"
					data-type='weave' data-index='{{indexWeave}}'>
					<view>生产费用-{{itemWeave.process_name}}</view>
					<view class="mt10 color27A2">
						{{itemWeave.total_price}} 元
					</view>
				</view>
				<view class="pt10 pb10 specialBorder" wx:for="{{financialInfo.production_inspection}}" wx:for-item="itemPro"
					wx:key="itemPro" wx:for-index="indexPro" bindtap='showFinancialPopup' data-type='production_inspection'
					data-index='{{indexPro}}' data-indexpro='{{indexPro}}'>
					<view>车间工资-{{itemPro.process_name}}</view>
					<view class="mt10 color27A2">
						{{itemPro.total_price}} 元
					</view>
				</view>
			</view>
		</view>
	</view>

	<view class="vh12"></view>
	<view class="mt20 submit" style="position: fixed;bottom:5%;left:50%;transform: translateX(-50%);">
		<view class="flex jcsa">
			<van-button wx:if="{{check !== 'true'}}" type="primary" size="small" data-type="showOrderLog"
				bindtap="showFinancialPopup">查看关联单据</van-button>
			<van-button wx:if="{{check === 'true' && orderDetail.time_data[0].is_check === 0}}" type="primary" size="small"
				data-type="showOrderLog" bindtap="openCheck">审核订单</van-button>
		</view>
	</view>

	<!-- 弹窗层 -->
	<!-- 产品费用 -->
	<van-popup show="{{ showProductPopup }}" round>
		<view class="bold pb10" style="border-bottom:1px solid #eeeeee ;">产品费用</view>
		<view style="max-height: 60vh;overflow-y: scroll; overflow-x: hidden;" class="vw85 pb10">
			<view wx:for="{{financialInfo.product}}" wx:for-item="itemPro" wx:key="itemPro" wx:for-index="indexPro">
				<view class="color27A2 mt10">{{itemPro.product_code || '未填写'}}</view>
				<view class="mt10">{{itemPro.total_number || 0}}件</view>
				<view class="mt10 flex jcsb">
					<view>均价 {{itemPro.pre_price || 0}} 元</view>
					<view>{{itemPro.total_price || 0}} 元</view>
				</view>
				<view wx:if="{{itemPro.quote_info}}" class="mt10 bold">报价费用</view>
				<view wx:if="{{itemPro.quote_info}}" class="mt10 flex jcsb">
					<view>均价 {{itemPro.quote_info.price}} 元</view>
					<view>{{itemPro.quote_info.total_price}} 元</view>
				</view>
				<view wx:if="{{itemPro.quote_info}}" class="{{itemPro.quote_info.class}} mt10">{{itemPro.quote_info.change}}
				</view>
				<view class="flex jcsb fz25 color91 mt10" wx:for="{{itemPro.detail}}" wx:for-item="itemProDetail"
					wx:key="itemProDetail" wx:for-index="indexProDetail">
					<view class="w40">{{itemProDetail.size_name||'未填写'}}/{{itemProDetail.color_name || '未填写'}}</view>
					<view class="w40">{{itemProDetail.price || 0}}元</view>
					<view>{{itemProDetail.total_price || 0}}元</view>
				</view>
			</view>
		</view>
		<view style="height: 5vh;border-top: 1px solid #eeeeee;" class="flex aic jcc" bindtap='closeShowProductPopup'>关闭
		</view>
	</van-popup>
	<!-- 原料费用 -->
	<van-popup show="{{ showMaterialPopup }}" round>
		<view class="bold pb10" style="border-bottom:1px solid #eeeeee ;">原料费用</view>
		<view style="max-height: 60vh;overflow-y: scroll; overflow-x: hidden;" class="vw85">
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w33">
					<view class="mt10">采购合计数量</view>
					<view class="mt10">计划：{{financialInfo.material.material.gather.material_order.plan}}</view>
					<view class="mt10 mb10">实际：{{financialInfo.material.material.gather.material_order.plan}}</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">调取合计数量</view>
					<view class="mt10">计划：{{financialInfo.material.material.gather.material_transfer.plan||0}}</view>
					<view class="mt10 mb10">实际：{{financialInfo.material.material.gather.material_transfer.plan||0}}</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">加工合计数量</view>
					<view class="mt10">计划：{{financialInfo.material.material.gather.material_process.plan||0}}</view>
					<view class="mt10 mb10">实际：{{financialInfo.material.material.gather.material_process.plan||0}}</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50">
					<view class="mt10">计划合计费用</view>
					<view class="mt10 mb10">{{financialInfo.material.material.gather.plan_price||0}}元</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">实际合计费用</view>
					<view class="mt10 mb10">{{financialInfo.material.material.gather.real_price||0}}元</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w33">
					<view class="mt10">费用平均单价</view>
					<view class="mt10 mb10">0元</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">产品平均单价</view>
					<view class="mt10">{{financialInfo.material.material.gather.product_pre_price||0}}元</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">产品平均克重</view>
					<view class="mt10">{{financialInfo.material.material.gather.pre_number||0}}g</view>
				</view>
			</view>
			<view wx:if="{{financialInfo.material.material.gather.quote_info}}" class="mt10 bold">报价费用</view>
			<view wx:if="{{financialInfo.material.material.gather.quote_info}}">
				<view class="mt10">计划合计费用 {{financialInfo.material.material.gather.quote_info.quote_total_price}} 元</view>
				<view class="mt10">产品实际平均单价 {{financialInfo.material.material.gather.quote_info.pre_product_price}} 元</view>
				<view class="mt10">产品平均克重 {{financialInfo.material.material.gather.quote_info.number}} g</view>
				<view class="{{financialInfo.material.material.gather.quote_info.class}} mt10">
					{{financialInfo.material.material.gather.quote_info.change}}</view>
			</view>
			<view class="line"></view>
			<view wx:for="{{financialInfo.material.material.detail.material_order}}" wx:for-item="itemMaterialOrder"
				wx:key="itemMaterialOrder" wx:for-index="indexMaterialOrder">
				<view class="flex mt10 flexWarp aic">
					<view class="w100 flex aic jcsb">
						<view class="color9E w25">费用类型</view>
						<view class="w75">订购</view>
					</view>
					<view class="w100 flex aic mt10 jcsb">
						<view class="color9E w25">单位/仓库</view>
						<view class="w75">{{itemMaterialOrder.client_name}}</view>
					</view>
					<view class="flex flexWarp aic mt10" wx:for="{{itemMaterialOrder.info}}" wx:for-item="itemMat"
						wx:key="itemMat" wx:for-index="indexMat">
						<view class="w100 flex mb10 jcsb">
							<view class="color9E w25">原料名称</view>
							<view class="w75 color27A2">{{itemMat.material_name}}</view>
						</view>
						<view class="w100 flex mb10 jcsb">
							<view class="color9E w25">属性颜色</view>
							<view class="w75">{{itemMat.attribute}}/{{itemMat.material_color}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">单价</view>
							<view class="w50">{{itemMat.price || 0}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划数</view>
							<view class="w50">{{itemMat.number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">最终入库</view>
							<view class="w50">{{itemMat.real_number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划费用</view>
							<view class="w50">{{itemMat.total_price}}元</view>
						</view>
						<view class="w50 flex jcsb">
							<view class="color9E w50">实际费用</view>
							<view class="w50">{{itemMat.real_total_price}}元</view>
						</view>
					</view>
					<view class="line" style="margin-bottom: unset;"></view>
				</view>
			</view>
			<view wx:for="{{financialInfo.material.material.detail.material_transfer}}" wx:for-item="itemTransfer"
				wx:key="itemTransfer" wx:for-index="indexTransfer">
				<view class="flex flexWarp aic mt10">
					<view class="w100 flex mb10 jcsb">
						<view class="color9E w25">费用类型</view>
						<view class="w75">调取</view>
					</view>
					<view class="w100 flex mb10 jcsb">
						<view class="color9E w25">单位/仓库</view>
						<view class="w75">{{itemTransfer.store}}</view>
					</view>
					<view class="flex flexWarp aic" wx:for="{{itemTransfer.info}}" wx:for-item="itemMat" wx:key="itemMat"
						wx:for-index="indexMat">
						<view class="w100 flex mb10 jcsb">
							<view class="color9E w25">原料名称</view>
							<view class="w75 color27A2">{{itemMat.material_name}}</view>
						</view>
						<view class="w100 flex mb10 jcsb">
							<view class="color9E w25">属性颜色</view>
							<view class="w75">{{itemMat.attribute}}/{{itemMat.material_color}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">单价</view>
							<view class="w50">{{itemMat.price || 0}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划数</view>
							<view class="w50">{{itemMat.number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">最终入库</view>
							<view class="w50">{{itemMat.real_number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划费用</view>
							<view class="w50">{{itemMat.total_price}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">实际费用</view>
							<view class="w50">{{itemMat.real_total_price}}元</view>
						</view>
					</view>
					<view class="line" style="margin-bottom: unset;"></view>
				</view>
			</view>
			<view class="pt10" style="border-bottom: 1px solid rgba(0,0,0,0.1);"
				wx:for="{{financialInfo.material.material.detail.material_process}}" wx:for-item="itemProcess"
				wx:key="itemProcess" wx:for-index="indexProcess">
				<view class="flex flexWarp aic">
					<view class="w100 flex mb10 jcsb">
						<view class="color9E w25">费用类型</view>
						<view class="w75">{{itemProcess.process}}</view>
					</view>
					<view class="w100 flex mb10 jcsb">
						<view class="color9E w25">单位/仓库</view>
						<view class="w75">{{itemProcess.client_name}}</view>
					</view>
					<view class="flex flexWarp aic" wx:for="{{itemProcess.info}}" wx:for-item="itemMat" wx:key="itemMat"
						wx:for-index="indexMat">
						<view class="w100 flex mb10 jcsb">
							<view class="color9E w25">原料名称</view>
							<view class="w75 color27A2">{{itemMat.material_order_name || itemMat.material_transfer_name}}</view>
						</view>
						<view class="w100 flex mb10 jcsb">
							<view class="color9E w25">属性颜色</view>
							<view class="w75" wx:if="{{itemProcess.process==='染色'}}">白胚/{{itemMat.after_color}}</view>
							<view class="w75" wx:if="{{itemProcess.process==='倒纱'}}">
								{{itemMat.before_attribute}}/{{itemMat.after_attribute||'未填写'}}</view>
							<view class="w75" wx:if="{{itemProcess.process==='并线'}}">{{itemMat.bingxian_desc}}</view>
							<view class="w75" wx:if="{{itemProcess.process==='膨纱'}}">{{itemMat.pengsha_desc}}</view>
							<view class="w75" wx:if="{{itemProcess.process==='切割'}}">{{itemMat.qiege_desc}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">单价</view>
							<view class="w50">{{itemMat.price || 0}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划数</view>
							<view class="w50">{{itemMat.number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">最终入库</view>
							<view class="w50">{{itemMat.real_number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划费用</view>
							<view class="w50">{{itemMat.total_price}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">实际费用</view>
							<view class="w50">{{itemMat.real_total_price}}元</view>
						</view>
					</view>
				</view>
			</view>
		</view>
		<view style="height: 5vh;border-top: 1px solid #eeeeee;" class="flex aic jcc" bindtap='closeShowMaterialPopup'>关闭
		</view>
	</van-popup>
	<!-- 辅料费用 -->
	<van-popup show="{{ showDecoratePopup }}" round>
		<view class="bold pb10" style="border-bottom:1px solid #eeeeee ;">辅料费用</view>
		<view style="max-height: 60vh;overflow-y: scroll; overflow-x: hidden;" class="vw85">
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w33">
					<view class="mt10">采购合计数量</view>
					<view class="mt10">计划：{{financialInfo.material.decorate.gather.material_order.plan}}</view>
					<view class="mt10 mb10">实际：{{financialInfo.material.decorate.gather.material_order.plan}}</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">调取合计数量</view>
					<view class="mt10">计划：{{financialInfo.material.decorate.gather.material_transfer.plan||0}}</view>
					<view class="mt10 mb10">实际：{{financialInfo.material.decorate.gather.material_transfer.plan||0}}</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">加工合计数量</view>
					<view class="mt10">计划：{{financialInfo.material.decorate.gather.material_process.plan||0}}</view>
					<view class="mt10 mb10">实际：{{financialInfo.material.decorate.gather.material_process.plan||0}}</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50">
					<view class="mt10">计划合计费用</view>
					<view class="mt10 mb10">{{financialInfo.material.decorate.gather.plan_price||0}}元</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">实际合计费用</view>
					<view class="mt10 mb10">{{financialInfo.material.decorate.gather.real_price||0}}元</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50">
					<view class="mt10">费用平均单价</view>
					<view class="mt10 mb10">0元</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">产品平均单价</view>
					<view class="mt10">{{financialInfo.material.decorate.gather.product_pre_price||0}}元</view>
				</view>
			</view>
			<view wx:if="{{financialInfo.material.decorate.gather.quote_info}}" class="mt10 bold">报价费用</view>
			<view wx:if="{{financialInfo.material.decorate.gather.quote_info}}">
				<view class="mt10">计划合计费用 {{financialInfo.material.decorate.gather.quote_info.quote_total_price}} 元</view>
				<view class="mt10">产品实际平均单价 {{financialInfo.material.decorate.gather.quote_info.pre_product_price}} 元</view>
				<view class="{{financialInfo.material.decorate.gather.quote_info.class}} mt10">
					{{financialInfo.material.decorate.gather.quote_info.change}}</view>
			</view>
			<view class="line"></view>
			<view class="mt10 pl10 pr10" wx:for="{{financialInfo.material.decorate.detail.material_order}}"
				wx:for-item="itemOrder" wx:key="itemOrder" wx:for-index="indexOrder">
				<view class="flex flexWarp aic">
					<view class="w100 flex mb10 jcsb">
						<view class="color9E w25">费用类型</view>
						<view class="w75">订购</view>
					</view>
					<view class="w100 flex mb10 jcsb">
						<view class="color9E w25">单位/仓库</view>
						<view class="w75">{{itemOrder.client_name}}</view>
					</view>
					<view class="flex flexWarp aic" wx:for="{{itemOrder.info}}" wx:for-item="itemMat" wx:key="itemMat"
						wx:for-index="indexMat">
						<view class="w100 flex mb10 jcsb">
							<view class="color9E w25">原料名称</view>
							<view class="w75 color27A2">{{itemMat.material_name}}</view>
						</view>
						<view class="w100 flex mb10 jcsb">
							<view class="color9E w25">属性颜色</view>
							<view class="w75">{{itemMat.attribute || '无'}}/{{itemMat.material_color || '无'}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">单价</view>
							<view class="w50">{{itemMat.price}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划数</view>
							<view class="w50">{{itemMat.number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">最终入库数</view>
							<view class="w50">{{itemMat.real_number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划费用</view>
							<view class="w50">{{itemMat.total_price}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">实际费用</view>
							<view class="w50">{{itemMat.real_total_price}}元</view>
						</view>
					</view>
					<view class="line" style="margin: unset;"></view>
				</view>
			</view>
			<view class="pt10 pl10 pr10" style="border: 1px solid rgba(0,0,0,0.1);"
				wx:for="{{financialInfo.material.decorate.detail.material_transfer}}" wx:for-item="itemTransfer"
				wx:key="itemTransfer" wx:for-index="indexTransfer">
				<view class="flex flexWarp aic">
					<view class="w50 flex mb10 jcsb">
						<view class="color9E">费用类型</view>
						<view class="w55">调取</view>
					</view>
					<view class="w50 flex mb10 jcsb">
						<view class="color9E">单位/仓库</view>
						<view class="w55">{{itemTransfer.store}}</view>
					</view>
					<view class="flex flexWarp aic" wx:for="{{itemTransfer.info}}" wx:for-item="itemMat" wx:key="itemMat"
						wx:for-index="indexMat">
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">原料名称</view>
							<view class="w55">{{itemMat.material_name}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">属性颜色</view>
							<view class="w55">{{itemMat.attribute||'无'}}/{{itemMat.material_color||'无'}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">单价</view>
							<view class="w55">{{itemMat.price || 0}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">计划数</view>
							<view class="w55">{{itemMat.number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">最终入库数</view>
							<view class="w55">{{itemMat.real_number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">计划费用</view>
							<view class="w55">{{itemMat.total_price}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">实际费用</view>
							<view class="w55">{{itemMat.real_total_price}}元</view>
						</view>
					</view>
				</view>
			</view>
			<view class="pt10 pl10 pr10" style="border: 1px solid rgba(0,0,0,0.1);"
				wx:for="{{financialInfo.material.decorate.detail.material_process}}" wx:for-item="itemProcess"
				wx:key="itemProcess" wx:for-index="indexProcess">
				<view class="flex flexWarp aic">
					<view class="w50 flex mb10 jcsb">
						<view class="color9E">费用类型</view>
						<view class="w55">{{itemProcess.process}}</view>
					</view>
					<view class="w50 flex mb10 jcsb">
						<view class="color9E">单位/仓库</view>
						<view class="w55">{{itemProcess.client_name}}</view>
					</view>
					<view class="flex flexWarp aic" wx:for="{{itemProcess.info}}" wx:for-item="itemMat" wx:key="itemMat"
						wx:for-index="indexMat">
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">原料名称</view>
							<view class="w55">{{itemMat.material_order_name || itemMat.material_transfer_name}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">属性颜色</view>
							<view class="w55">{{itemMat.after_attribute||'无'}}/{{itemMat.after_color||'无'}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">单价</view>
							<view class="w55">{{itemMat.price || 0}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">计划数</view>
							<view class="w55">{{itemMat.number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">最终入库数</view>
							<view class="w55">{{itemMat.real_number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">计划费用</view>
							<view class="w55">{{itemMat.total_price}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">实际费用</view>
							<view class="w55">{{itemMat.real_total_price}}元</view>
						</view>
					</view>
				</view>
			</view>
		</view>
		<view style="height: 5vh;border-top: 1px solid #eeeeee;" class="flex aic jcc" bindtap='closeShowDecoratePopup'>关闭
		</view>
	</van-popup>
	<!-- 包装辅料 -->
	<van-popup show="{{ showPackPopup }}" round>
		<view class="bold pb10" style="border-bottom:1px solid #eeeeee ;">包装辅料</view>
		<view style="max-height: 60vh;overflow-y: scroll; overflow-x: hidden;" class="vw85">
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50">
					<view class="mt10">计划订购数量</view>
					<view class="mt10 mb10">{{financialInfo.pack.gather.plan_number||0}}</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">计划费用合计</view>
					<view class="mt10 mb10">{{financialInfo.pack.gather.total_price||0}}元</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50">
					<view class="mt10">费用平均单价</view>
					<view class="mt10 mb10">0元</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">产品平均单价</view>
					<view class="mt10">{{financialInfo.pack.gather.product_pre_price||0}}元</view>
				</view>
			</view>
			<view wx:if="{{financialInfo.pack.gather.quote_info}}" class="mt10 bold">报价费用</view>
			<view wx:if="{{financialInfo.pack.gather.quote_info}}">
				<view class="mt10">计划合计费用 {{financialInfo.pack.gather.quote_info.quote_total_price}} 元</view>
				<view class="mt10">产品实际平均单价 {{financialInfo.pack.gather.quote_info.pre_product_price}} 元</view>
				<view class="{{financialInfo.pack.gather.quote_info.class}} mt10">
					{{financialInfo.pack.gather.quote_info.change}}</view>
			</view>
			<view class="line"></view>
			<view class="mt10 pl10 pr10" wx:for="{{financialInfo.pack.detail}}" wx:for-item="itemOrder" wx:key="itemOrder"
				wx:for-index="indexOrder">
				<view class="flex flexWarp aic">
					<view class="w100 flex mb10 jcsb">
						<view class="w30 color9E">单位/仓库</view>
						<view class="w70">{{itemOrder.client_name}}</view>
					</view>
					<view class="flex flexWarp aic" wx:for="{{itemOrder.info}}" wx:for-item="itemMat" wx:key="itemMat"
						wx:for-index="indexMat">
						<view class="w100 flex mb10 jcsb">
							<view class="w30 color9E">辅料名称</view>
							<view class="w70 color27A2">{{itemMat.pack_material_name}}</view>
						</view>
						<view class="w100 flex mb10 jcsb">
							<view class="w30 color9E">尺寸</view>
							<view class="w70">{{itemMat.length}}cm*{{itemMat.width}}cm*{{itemMat.height}}cm</view>
						</view>
						<view class="w100 flex mb10 jcsb">
							<view class="w30 color9E">属性或说明</view>
							<view class="w70">{{itemMat.desc || '无'}}</view>
						</view>
						<view class="w100 flex mb10 jcsb">
							<view class="w30 color9E">计划订购数</view>
							<view class="w70">{{itemMat.number || '无'}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="w85 color9E">单价</view>
							<view class="w55">{{itemMat.count_price || 0}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E">总价</view>
							<view class="w55">{{itemMat.total_price || 0}}元</view>
						</view>
					</view>
				</view>
			</view>
		</view>
		<view style="height: 5vh;border-top: 1px solid #eeeeee;" class="flex aic jcc" bindtap='closeShowPackPopup'>关闭
		</view>
	</van-popup>
	<!-- 生产费用 -->
	<van-popup show="{{ showWeavePopup }}" round>
		<view class="bold pb10" style="border-bottom:1px solid #eeeeee ;">生产费用</view>
		<view style="max-height: 60vh;overflow-y: scroll; overflow-x: hidden;" class="vw85">
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">费用工序</view>
					<view class="mt10 mb10">{{financialInfo.weave[indexweave].process_name||'无'}}</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">工序说明</view>
					<view class="mt10 mb10 pl10 pr10"
						style="display: -webkit-box;overflow: hidden;-webkit-box-orient: vertical; -webkit-line-clamp: 2;">
						{{financialInfo.weave[indexweave].process_desc || '无'}}</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50">
					<view class="mt10">生产数量</view>
					<view class="mt10 mb10">{{financialInfo.weave[indexweave].number||0}}</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">实际完成数量</view>
					<view class="mt10 mb10">{{financialInfo.weave[indexweave].real_number||0}}</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w33">
					<view class="mt10">计划合计费用</view>
					<view class="mt10 mb10">{{financialInfo.weave[indexweave].total_price||0}}元</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">费用平均单价</view>
					<view class="mt10">0元</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">产品平均单价</view>
					<view class="mt10">{{financialInfo.weave[indexweave].product_pre_price||0}}元</view>
				</view>
			</view>
			<view wx:if="{{financialInfo.weave[indexweave].quote_info}}" class="mt10 bold">报价费用</view>
			<view wx:if="{{financialInfo.weave[indexweave].quote_info}}">
				<view class="mt10">计划合计费用 {{financialInfo.weave[indexweave].quote_info.quote_total_price}} 元</view>
				<view class="mt10">产品实际平均单价 {{financialInfo.weave[indexweave].quote_info.pre_product_price}} 元</view>
				<view class="{{financialInfo.weave[indexweave].quote_info.class}} mt10">
					{{financialInfo.weave[indexweave].quote_info.change}}</view>
			</view>
			<view class="line"></view>
			<view class="mt10 pl10 pr10" wx:for="{{financialInfo.weave[indexweave].detail}}" wx:for-item="itemWeave"
				wx:key="itemWeave" wx:for-index="indexWeave">
				<view class="flex flexWarp aic">
					<view class="w100 flex mb10 jcsb">
						<view class="w25 color9E">单位名称</view>
						<view class="w75">{{itemWeave.client}}</view>
					</view>
					<view class="flex flexWarp aic" wx:for="{{itemWeave.product_info}}" wx:for-item="itemMat" wx:key="itemMat"
						wx:for-index="indexMat">
						<view class="w100 flex mb10 jcsb">
							<view class="w25 color9E">产品信息</view>
							<view class="w75 color27A2">
								{{itemMat.product_code}}（{{itemMat.category_name}}/{{itemMat.secondary_category_name}}）
							</view>
						</view>
						<view class="w100 flex mb10 jcsb">
							<view class="w25 color9E">尺码颜色</view>
							<view class="w75">{{itemMat.size_name}}/{{itemMat.color_name}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划数量</view>
							<view class="w50">{{itemMat.number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">完成数量</view>
							<view class="w50">{{itemMat.real_number}}</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">单价</view>
							<view class="w50">{{itemMat.price}}元</view>
						</view>
						<view class="w50 flex mb10 jcsb">
							<view class="color9E w50">计划小计</view>
							<view class="w50">{{itemMat.total_price}}元</view>
						</view>
					</view>
					<view class="line" style="margin: unset;"></view>
				</view>
			</view>
		</view>
		<view style="height: 5vh;border-top: 1px solid #eeeeee;" class="flex aic jcc" bindtap='closeShowWeavePopup'>关闭
		</view>
	</van-popup>
	<!-- 车间工资 -->
	<van-popup show="{{ showCheJianPopup }}" round>
		<view class="bold pb10" style="border-bottom:1px solid #eeeeee ;">车间工资</view>
		<view style="max-height: 60vh;overflow-y: scroll; overflow-x: hidden;" class="vw85">
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">费用工序</view>
					<view class="mt10 mb10">{{financialInfo.production_inspection[indexpro].process_name||'无'}}</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">工序说明</view>
					<view class="mt10 mb10 pl10 pr10"
						style="display: -webkit-box;overflow: hidden;-webkit-box-orient: vertical; -webkit-line-clamp: 2;">
						{{financialInfo.production_inspection[indexpro].process_desc || '无'}}</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w50">
					<view class="mt10">完成数量</view>
					<view class="mt10 mb10">{{financialInfo.production_inspection[indexpro].number||0}}</view>
				</view>
				<view class="w50" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">额外数量</view>
					<view class="mt10 mb10">{{financialInfo.production_inspection[indexpro].extra_number||0}}</view>
				</view>
			</view>
			<view class="flex fz25 tc" style="border-bottom: 1px solid rgba(0,0,0,0.1);">
				<view class="w33">
					<view class="mt10">合计结算总价</view>
					<view class="mt10 mb10">{{financialInfo.production_inspection[indexpro].total_price||0}}元</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">费用平均单价</view>
					<view class="mt10">0元</view>
				</view>
				<view class="w33" style="border-left: 1px solid rgba(0,0,0,0.1);">
					<view class="mt10">产品平均单价</view>
					<view class="mt10">{{financialInfo.production_inspection[indexpro].product_pre_price||0}}元</view>
				</view>
			</view>
			<view class="mt10 pl10 pr10" wx:for="{{financialInfo.production_inspection[indexpro].detail}}"
				wx:for-item="itemPro" wx:key="itemPro" wx:for-index="indexPro">
				<view class="flex flexWarp aic">
					<view class="w100 flex mb10 jcsb">
						<view class="w25 color9E">员工姓名</view>
						<view class="w75">{{itemPro.staff_name}}</view>
					</view>
					<view class="w100 flex flexWarp aic" wx:for="{{itemPro.info}}" wx:for-item="itemMat" wx:key="itemMat"
						wx:for-index="indexMat">
						<view class="w100 flex mb10 jcsb">
							<view class="w25 color9E">产品信息</view>
							<view class="w75">{{itemMat.product_code}}</view>
						</view>
						<view class="w100 flex flexWarp aic" wx:for="{{itemMat.info}}" wx:for-item="itemColor" wx:key="itemColor"
							wx:for-index="indexColor">
							<view class="w50 flex mb10 jcsb">
								<view class="color9E w50">尺码颜色</view>
								<view class="w50">{{itemColor.size_name}}/{{itemColor.color_name}}</view>
							</view>
							<view class="w50 flex mb10 jcsb">
								<view class="color9E w50">结算单价</view>
								<view class="w50">{{itemColor.price}}元</view>
							</view>
							<view class="w50 flex mb10 jcsb">
								<view class="color9E w50">完成数量</view>
								<view class="w50">{{itemColor.number}}</view>
							</view>
							<view class="w50 flex mb10 jcsb">
								<view class="color9E w50">额外数量</view>
								<view class="w50">{{itemColor.extra_number}}</view>
							</view>
							<view class="w50 flex mb10 jcsb">
								<view class="color9E w50">次品数量</view>
								<view class="w50 colorRed">{{itemColor.shoddy_number}}</view>
							</view>
							<view class="w50 flex mb10 jcsb">
								<view class="color9E w50">计划小计</view>
								<view class="w50">{{itemColor.total_price}}元</view>
							</view>
						</view>
					</view>
				</view>
			</view>
		</view>
		<view style="height: 5vh;border-top: 1px solid #eeeeee;" class="flex aic jcc" bindtap='closeShowCheJianPopup'>关闭
		</view>
	</van-popup>
	<order-log show="{{showOrderLog}}" order_id="{{order_id}}" top_id="{{id}}" bind:cancel="closeShowOrderLog">
	</order-log>

	<l-message content="{{content}}" />
	<van-dialog id="van-dialog" />

	<van-popup round show="{{ showPro }}" catchtouchmove='false'>
		<scroll-view style="height: 50vh;" scroll-y>
			<view class="tc">
				<view class="mt10 flex jcc aic">
					<view>{{productInfo.product_code}}</view>
					<view wx:if="{{productInfo.craft_list_id}}" class="ml10"
						style="border: 1px solid #03d0a2; border-radius: 200px;width: 25px;height: 25px; color: #03d0a2;">工</view>
					<view wx:else class="ml10"
						style="border: 1px solid #999; border-radius: 200px;width: 25px;height: 25px; color: #999;">工</view>
				</view>
			</view>
			<view>
				<view class="bold mt10">基本信息</view>
				<view class="flex mt10">
					<view class="w30 color6">产品名称</view>
					<view class="w70 {{productInfo.name?'color27A2':'color9'}}">{{productInfo.name || '无'}}</view>
				</view>
				<view class="flex mt10">
					<view class="flex w50">
						<view class="w60 color6">客户款号</view>
						<view class="w40 {{productInfo.style_code?'color3':'color9'}}">{{productInfo.style_code || '无'}}</view>
					</view>
					<view class="flex w50">
						<view class="w60 color6"> 产品款式</view>
						<view class="w40 {{productInfo.style_data?'color3':'color9'}}">{{productInfo.style_data || '无'}}</view>
					</view>
				</view>
				<view class="flex mt10">
					<view class="w30 color6">产品配色</view>
					<view class="w70">
						<text wx:for="{{productInfo.color_data}}">{{item.name}}<text
								wx:if="{{index+1!==productInfo.color_data.length}}">/</text>
						</text>
					</view>
				</view>
				<view class="flex mt10">
					<view class="w30 color6">产品描述</view>
					<rich-text class="w70" nodes="{{productInfo.desc}}"></rich-text>
				</view>
				<view class="bold mt10">大身信息</view>
				<view class="flex mt10">
					<view class="w30 color6">大身成分</view>
					<view class="w70">
						<text wx:for="{{productInfo.component_data}}">{{item.name}}{{item.number||0}}%</text>
					</view>
				</view>
				<view class="flex mt10">
					<view class="w30 color6">大身尺码</view>
					<view class="w70">
						<view class="mt10" wx:for="{{productInfo.size_data}}">{{index+1}}. {{item.name}} {{item.weight}}g
							{{item.size_info}}
						</view>
					</view>
				</view>
			</view>
			<view class="tc mt10">
				<image class="vw50 vh30" wx:if="{{productInfo.image_data.length === 0}}" mode="aspectFit"
					src="https://file.zwyknit.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220211103236.png">
				</image>
				<image class="vw50 vh30" wx:else="{{productInfo.image_data.length !== 0}}" mode="aspectFit"
					src="{{productInfo.image_data[0]}}" bindtap="openShowImage">
				</image>
			</view>
		</scroll-view>
		<view class="line"></view>
		<view class="tc" bindtap="closePro">关闭</view>
	</van-popup>
	<t-image-viewer visible="{{showImage}}" background-color='rgba(0, 0, 0, 0.6)' images="{{productInfo.image_data}}"
		bind:close="closeShowImage" />

	<movable-area class="movable-area">
		<movable-view class="movable-view" direction="vertical" x="10000000000" y='500'>
			<view class="pof bgColorWhite pt5 pr10 pb5 pl10 color27A2" bindtap="toOrderList"
				style="border: 1px solid #008df96b; border-radius:5px 0 0 5px;border-right: none;">上一页</view>
		</movable-view>
	</movable-area>

	<l-mask show="{{showShenHe}}" center>
		<view class='card' style="padding-bottom:0;max-height: 70vh;padding-top:0">
			<view class="flex pt10">
				<view class="bold w25">审核结果</view>
				<view class="w70">
					<l-radio-group placement="row" current="{{current}}" none-checked="{{false}}" bind:linchange="changeRadio">
						<l-radio key="{{1}}">通过</l-radio>
						<l-radio key="{{2}}" style="margin-left: 10px;">驳回</l-radio>
					</l-radio-group>
				</view>
			</view>
			<view class="line"></view>
			<view class="flex mt10" wx:if="{{current === 2}}">
				<view class="bold w25">驳回理由</view>
				<view class="w60">
					<l-textarea auto-height="{{true}}" l-class="noTopRightLeft" indicator="{{false}}" maxlength="80"
						bind:lininput="inputReason" />
				</view>
			</view>
			<view class="flex mt10">
				<view class="bold w25 pt10 pb10">备注信息</view>
				<view class="w60">
					<l-textarea auto-height="{{true}}" l-class="noTopRightLeft" indicator="{{false}}" maxlength="80"
						bind:lininput="inputDesc" />
				</view>
			</view>
			<view class="line" style="margin-bottom: 0;"></view>
			<view class="flex" style="margin-top: 0;">
				<view class="w50 tc h100 pt10 pb10" bindtap="closeCheck">关闭</view>
				<view class="w50 tc h100 pt10 pb10" style="border-left:1px solid #e7e7e7;" bindtap="confirmCheck">提交</view>
			</view>
		</view>
	</l-mask>

	<check-detail show="{{showCheckDetail}}" pid="{{id}}" is_check="{{info.is_check}}" check_type="1"
		bind:cancel="closeCheckDetail"></check-detail>
</view>